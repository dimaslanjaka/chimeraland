const e=document.querySelector("#a-tbl"),t=document.querySelector("#p-tbl");function getAttendant(){return fetch(attendantJson()).then((e=>e.json())).then((e=>e))}function attendantJson(){return"//backend.webmanajemen.com/chimeraland/attendant.php?show="+(new Date).getTime()}function uniq(e,t){if(!Array.isArray(e))throw new Error("array param must be instance of ARRAY");return e.filter(((n,o)=>e.findIndex((e=>n[t]===e[t]))===o))}function scrollTo(e){return new Promise((t=>{const n=e||window.location.hash.split("#")[1]||null;if(!n)return console.log("[scroll] empty id");const o="[id*='"+n+"']",a=document.querySelector(o);if(a.scrollIntoView(!0),!a)return console.log("[scroll] empty target element with id="+n);console.log("[scroll] to #"+n);"netscape"in window&&/ rv:/.test(navigator.userAgent)?a.scrollIntoView({block:"center"}):window.scroll({top:a.offsetTop,left:0,behavior:"smooth"}),t({offset:a.offsetTop,id:n,selector:o})}))}"cdpn.io"===location.host&&console.clear(),window.onload=function(){getAttendant().then((e=>(e.data=uniq(e.data,"name"),e))).then((t=>{const n=t.data;let o=[];n.forEach((e=>{let t=[];Object.keys(e).forEach((n=>{let o=e[n];"qty"===n&&(n="Quality"),"delicacies"===n&&(o=o.map((e=>{const t=e.replace("-","").toLowerCase();return`<a href='/chimeraland/Recipes.html?query=${t}'>${t}</a><span class='mr-2'>,</span>`})),o=o.join("")),Array.isArray(o)&&(o=o.join(", ")),n=n.toUpperCase(),t.push(`<tr><td>${n}</td><td>${o}</td></tr>`)}));const n=e.name.replace(/\s+/gm,"-").replace(/-+/gm,"-").toLowerCase(),a=`<div class="d-flex justify-content-between"><div id='${n}'><h3>${e.name}</h3></div><div><a href="#${n}">${n}</a></div></div>`;o.push({header:a,items:t.join("")})})),o=o.map((e=>e.header+"<table class='table'><thead><tr><th>Name</th><th>Value</th></thead><tbody>"+e.items+"</tbody></table>")),e.innerHTML=o.join(""),console.log("attendant updated successfully")})).then((()=>{scrollTo().then((e=>{setTimeout((()=>{scrollTo().then((t=>{console.log(e,t)}))}),3e3)}))}))};